<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>Personas</title>
    </head>
    <body>

        <ui:composition template="./../../resources/template/facesTemplate.xhtml">
            <ui:define name="content">
                <h:form id="frmBuscar">
                    <fieldset>
                        <div class="tablaForm">
                            <div class="fila">
                                <div class="etiq"><label for="documento">Documento: </label></div>
                                <div class="cont"><input id="documento" jsfc="h:inputText" value="#{personaBean.documento}" maxlength="11"/>
                                </div>
                                <div class="etiq"><label for="nombre">Nombre: </label></div>
                                <div class="cont"><input id="nombre" name="nombre" value="#{personaBean.nombre}" maxlength="50"/>
                                </div>
                                <div class="etiq"><label for="fisica">Categoria: </label></div>
                                <div class="cont"><select id="fisica" name="fisica" jsfc="h:selectOneMenu" value="#{personaBean.fisica}">
                                        <f:selectItem itemLabel="-SELECCIONAR-" itemValue="X"/>
                                        <f:selectItem itemLabel="Persona Física" itemValue="S"/>
                                        <f:selectItem itemLabel="Persona Jurídica" itemValue="N"/>
                                    </select>
                                </div>
                                <div class="etiq"><label for="direccion1">Direccion: </label></div>
                                <div class="cont"><input id="direccion1" jsfc="h:inputText" value="#{personaBean.direccion1}" maxlength="50">
                                    </input>
                                </div>
                            </div>
                            <div class="fila">
                                <div class="etiq"><label for="telefono_fijo">Teléfono Fijo: </label></div>
                                <div class="cont"><input id="telefono_fijo" name="telefono_fijo" jsfc="h:inputText" value="#{personaBean.telefonoFijo}" maxlength="11"/>
                                </div>
                                <div class="etiq"><label for="telefono_movil">Teléfono Movil: </label></div>
                                <div class="cont"><input id="telefono_movil" name="telefono_movil" jsfc="h:inputText" value="#{personaBean.telefonoMovil}" maxlength="13"/>
                                </div>
                                <div class="etiq"><label for="habilitado">Estado: </label></div>
                                <div class="cont"><select id="habilitado" name="habilitado" jsfc="h:selectOneMenu" value="#{personaBean.habilitado}">
                                        <f:selectItem itemLabel="-SELECCIONAR-" itemValue="X"/>
                                        <f:selectItem itemLabel="Habilitado" itemValue="S"/>
                                        <f:selectItem itemLabel="Deshabilitado" itemValue="N"/>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="botonera">
                            <input id="btnBuscar" class="submit" type="submit" jsfc="h:commandButton" value="Buscar" action="#{personaBean.buscar}"
                                   disabled="#{(personaBean.valido)?false:true}"/>
                            <input class="submit" type="submit" jsfc="h:commandButton" value="Todos" action="#{personaBean.todos}"/>
                        </div>
                    </fieldset>
                </h:form>
                <h:form id="frm">
                    <div class="mensajes">
                        <h:messages id="messages" errorClass="messageError" infoClass="messageInfo" warnClass="messageWarn"/>
                    </div>
                    <fieldset>
                        <div class="tablaForm">
                            <div class="fila">
                                <div class="t_head" style="width: 2%;"></div>
                                <div class="t_head" style="width: 10%;"><p>
                                        <a id="lnkDocumento"  jsfc="h:commandLink" action="#{personaBean.listar}">Documento
                                            <f:setPropertyActionListener value="documento" target="#{personaBean.facade.col}"/>
                                            <f:setPropertyActionListener value="x" target="#{personaBean.facade.asc}"/>
                                        </a>
                                        <h:outputText value="#{(personaBean.facade.asc) ? '▲' : '▼'}"
                                                      rendered="#{personaBean.facade.col eq 'documento'}"/></p></div>
                                <div class="t_head" style="width: 30%;"><p>
                                        <a id="lnkNombre"  jsfc="h:commandLink" action="#{personaBean.listar}">Nombre
                                            <f:setPropertyActionListener value="nombre" target="#{personaBean.facade.col}"/>
                                            <f:setPropertyActionListener value="x" target="#{personaBean.facade.asc}"/>
                                        </a>
                                        <h:outputText value="#{(personaBean.facade.asc) ? '▲' : '▼'}"
                                                      rendered="#{personaBean.facade.col eq 'nombre'}"/></p></div>
                                <div class="t_head" style="width: 30%;"><p>
                                        <a id="lnkDireccion1"  jsfc="h:commandLink" action="#{personaBean.listar}">Direccion
                                            <f:setPropertyActionListener value="direccion1" target="#{personaBean.facade.col}"/>
                                            <f:setPropertyActionListener value="x" target="#{personaBean.facade.asc}"/>
                                        </a>
                                        <h:outputText value="#{(personaBean.facade.asc) ? '▲' : '▼'}"
                                                      rendered="#{personaBean.facade.col eq 'direccion1'}"/></p></div>
                                <div class="t_head" style="width: 10%;"><p>
                                        <a id="lnkTelefono_fijo"  jsfc="h:commandLink" action="#{personaBean.listar}">Telefono Fijo
                                            <f:setPropertyActionListener value="telefonoFijo" target="#{personaBean.facade.col}"/>
                                            <f:setPropertyActionListener value="x" target="#{personaBean.facade.asc}"/>
                                        </a>
                                        <h:outputText value="#{(personaBean.facade.asc) ? '▲' : '▼'}"
                                                      rendered="#{personaBean.facade.col eq 'telefonoFijo'}"/></p></div>
                                <div class="t_head" style="width: 10%;"><p>
                                        <a id="lnkTelefono_movil"  jsfc="h:commandLink" action="#{personaBean.listar}">Telefono Movil
                                            <f:setPropertyActionListener value="telefonoMovil" target="#{personaBean.facade.col}"/>
                                            <f:setPropertyActionListener value="x" target="#{personaBean.facade.asc}"/>
                                        </a>
                                        <h:outputText value="#{(personaBean.facade.asc) ? '▲' : '▼'}"
                                                      rendered="#{personaBean.facade.col eq 'telefonoMovil'}"/></p></div>
                                <div class="t_head" style="width: 10%;"><p>
                                        <a id="lnkEstado"  jsfc="h:commandLink" action="#{personaBean.listar}">Estado
                                            <f:setPropertyActionListener value="estado" target="#{personaBean.facade.col}"/>
                                            <f:setPropertyActionListener value="x" target="#{personaBean.facade.asc}"/>
                                        </a>
                                        <h:outputText value="#{(personaBean.facade.asc) ? '▲' : '▼'}"
                                                      rendered="#{personaBean.facade.col eq 'Estado'}"/></p></div>
                            </div>
                            <ui:repeat var="row" value="#{personaBean.lista}">
                                <div class="filaTabla">
                                    <div class="d" style="width: 2%;"><input type="radio" id="radio" name="radio" 
                                                                             value="#{row.personaPK.id}:#{row.personaPK.documento}"/></div>
                                    <div class="d" style="width: 10%;"><h:outputText value="#{row.personaPK.documento}"/></div>
                                    <div class="d" style="width: 30%;"><h:outputText value="#{row.nombre}"/></div>
                                    <div class="d" style="width: 10%;"><h:outputText value="#{row.direccion1}"/></div>
                                    <div class="d" style="width: 10%;"><h:outputText value="#{row.telefonoFijo}"/></div>
                                    <div class="d" style="width: 10%;"><h:outputText value="#{row.telefonoMovil}"/></div>
                                    <div class="d" style="width: 10%;"><h:outputText value="#{row.habilitado eq 'S'?'Habilitado':'Deshabilitado'}"/></div>
                                </div>
                            </ui:repeat>
                        </div>
                        <div class="t_footer">
                            <h:commandLink action="#{personaBean.anterior}">Anterior</h:commandLink>
                            &#160;|&#160;#{personaBean.desde + 1}..#{personaBean.ultimoItem} de #{personaBean.total}&#160;|&#160;
                            <h:commandLink action="#{personaBean.siguiente}">Siguiente</h:commandLink>
                        </div>
                        <div class="botonera">
                            <h:commandButton id="btnNuevo" value="Nuevo" action="#{personaBean.nuevo}" styleClass="submit"/>
                            <h:commandButton id="btnModificar" value="Modificar" action="#{personaBean.modificar}" styleClass="submit"/>
                        </div>
                    </fieldset>
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>
