<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>MAIN - BEJ - MOTOS</title>
    </head>
    <h:body>
        <ui:composition template="./../../resources/template/facesTemplate.xhtml">

            <ui:define name="top">

            </ui:define>
            <ui:define name="content">
                <h:form id="frm">
                    <div style="width: 25%; max-height: 100%; float: left; margin: auto; padding-right: 5px;">
                        <fieldset>
                            <div class="tablaDatos">
                                <h4>Cuotas Próximas a vencer</h4>
                                <table style="font-size: 10px;">
                                    <th style="width: 80%;">Cliente</th>
                                    <th>Total</th>
                                    <tbody>
                                        <ui:repeat value="#{mainBean.listaCuotasProximasAVencer}" var="cuota">
                                            <tr>
                                                <td align="left"><h:link value="#{cuota.credito.transaccion.comprador.nombre}" outcome="resumenCredito">
                                                        <f:param name="creditoResumen" value="#{cuota.credito.id}"/>
                                                    </h:link>
                                                </td>
                                                <td align="right"><h:outputText value="#{cuota.totalAPagar}">
                                                        <f:convertNumber pattern="#{loginBean.monedaPattern}"/>
                                                    </h:outputText>
                                                </td>
                                            </tr>
                                        </ui:repeat>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="2"><h:commandLink action="vencimientoCuotas">Mas...</h:commandLink></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </fieldset> 
                    </div>
                    <div style="width: 53%; max-height: 70%; float: left; margin: auto; padding:0px 5px 5px 5px;">
                        <fieldset>
                            <div id="centro" style="height: 300px;">
                                <p><h:commandLink styleClass="btnCobrar" action="cobrarCredito"><span>&nbsp;&nbsp;&nbsp;Cobrar Cuota</span></h:commandLink>
                                    <h:commandLink styleClass="btnVenderMoto" action="#{ventaMotosBean.nuevo()}"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vender Moto</span></h:commandLink><br/>
                                    <h:commandLink styleClass="btnRegistrarCompra" action="#{compraMotosBean.nuevo()}"><span>Registrar Compra</span></h:commandLink>
                                    <h:commandLink styleClass="btnVencimientos" action="vencimientoCuotas"><span>Vencimientos</span></h:commandLink><br/>
                                    <h:commandLink styleClass="btnStockActual" action="stockActual"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stock Actual</span></h:commandLink>
                                    <h:commandLink styleClass="btnCreditos" action="credito"><span>Créditos Abiertos</span></h:commandLink><br/>
                                </p>
                            </div>
                        </fieldset> </div>
                    <div style="width: 18%; max-height: 50%; float: right; margin: auto; padding-left: 5px;">
                        <fieldset>
                            <div style="height: 200px;">
                                <h3><h:outputText value="#{loginBean.userName}"/></h3>
                                <table class="tablaGrilla" style="font-size: 10px;">
                                    <tr>
                                        <th>Conectado desde las</th>
                                        <td align="right"><h:outputText value="#{loginBean.loginDesde}"><f:convertDateTime pattern="HH:mm:ss" timeZone="#{loginBean.timeZone}"/></h:outputText></td>
                                    </tr>
                                    <tr>
                                        <th>Usuarios Conectados</th>
                                        <td align="right"><h:outputText value="#{loginBean.usuariosConectados()}"/></td>
                                    </tr>
                                </table>
                                <div class="botonera">
                                    <h:commandLink value="Cambiar Password" action="#{loginBean.cambiarPasswordDesdeMain()}"/>
                                </div>
                            </div>
                        </fieldset> </div>
                    <div style="width: 18%; max-height: 50%; float: right; margin: auto; padding-left: 5px;">
                        <fieldset>
                            <div class="tablaDatos">
                                <h4>Pagares</h4>
                                <table style="font-size: 10px;">
                                    <th style="width: 80%;">Cliente</th>
                                    <th>Vencimiento</th>
                                    <tbody>
                                        <ui:repeat value="#{mainBean.listaPagareProximosAVencer}" var="pagare">
                                            <tr>
                                                <td align="left"><h:link value="#{pagare.credito.transaccion.comprador.nombre}" outcome="creditoDetalle">
                                                        <f:param name="creditoResumen" value="#{pagare.credito.id}"/>
                                                    </h:link>
                                                </td>
                                                <td align="right"><h:outputText value="#{pagare.fechaVencimiento}">
                                                        <f:convertDateTime pattern="#{loginBean.fechaCortaPattern}" timeZone="#{loginBean.timeZone}"/>
                                                    </h:outputText>
                                                </td>
                                            </tr>
                                        </ui:repeat>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="2"><h:commandLink action="pagare">Mas...</h:commandLink></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </fieldset> </div>
                    <div style="width: 100%; max-height: 20%; float: left; margin: auto; clear: both;">
                        <fieldset>
                            <div style="height: 200px;">
                            </div>
                        </fieldset> </div>
                </h:form>
            </ui:define>
            <ui:define name="bottom">
            </ui:define>

        </ui:composition>


    </h:body>
</html>
